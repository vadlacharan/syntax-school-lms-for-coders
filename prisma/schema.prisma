generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model user_roles {
  userid            String              @id @default("0")
  ismaster          Boolean?            @default(false)
  course_enrollment course_enrollment[]

  @@map("user-roles")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model course {
  id                Int                 @id @default(autoincrement())
  title             String?
  lessons           Int?                @db.SmallInt
  created_at        DateTime            @default(now()) @db.Timestamptz(6)
  course_enrollment course_enrollment[]
}

model course_enrollment {
  id                Int         @id @default(autoincrement())
  userid            String?     @default("example")
  created_at        DateTime    @default(now()) @db.Timestamptz(6)
  course_id         Int?
  lessons_completed Int?        @default(0) @db.SmallInt
  progress          Int?        @default(0) @db.SmallInt
  course            course?     @relation(fields: [course_id], references: [id], onDelete: Cascade)
  user_roles        user_roles? @relation(fields: [userid], references: [userid], onDelete: NoAction, onUpdate: NoAction)
}
